import{m as E}from"./mustache-41b64f02.js";class f{constructor(o){this.properties=o??[]}get(o){const t=this.properties.filter(r=>r.name===o).map(r=>r.value);if(t.length>1)throw new Error('Expected only one property to be named "'+o+'"');if(t.length!==0)return t[0]}getString(o){return this.getByType(o,"string")}getNumber(o){return this.getByType(o,"number")}getBoolean(o){return this.getByType(o,"boolean")}getByType(o,t){const r=this.get(o);if(r!==void 0){if(t!=="json"&&typeof r!==t)throw new Error('Expected property "'+o+'" to have type "'+t+'"');return r}}mustGetString(o){return this.mustGetByType(o,"string")}mustGetNumber(o){return this.mustGetByType(o,"number")}mustGetBoolean(o){return this.mustGetByType(o,"boolean")}mustGetByType(o,t){const r=this.get(o);if(r===void 0)throw new Error('Property "'+o+'" is missing');if(t!=="json"&&typeof r!==t)throw new Error('Expected property "'+o+'" to have type "'+t+'"');return r}getType(o){const t=this.properties.filter(r=>r.name===o).map(r=>r.type);if(t.length>1)throw new Error('Expected only one property to be named "'+o+'"');if(t.length!==0)return t[0]}}const k="https://unpkg.com/@workadventure/scripting-api-extra@1.4.6/dist";class Me{constructor(o){this.name=o.name,this.x=o.x,this.y=o.y,this.properties=new f(o.properties)}get isReadable(){const o=this.properties.getString("readableBy");return o?WA.player.tags.includes(o):!0}get isWritable(){const o=this.properties.getString("writableBy");return o?WA.player.tags.includes(o):!0}}function j(e){const o=e?"#"+e.join():"";WA.nav.openCoWebSite(k+"/configuration.html"+o)}async function Ue(e,o){const t=await WA.room.getTiledMap(),r=new Map;return N(t.layers,r,e,o),r}function N(e,o,t,r){for(const n of e)if(n.type==="objectgroup"){for(const i of n.objects)if(i.type==="variable"||i.class==="variable"){if(t&&n.name!==t||r&&!r.includes(i.name))continue;o.set(i.name,new Me(i))}}else n.type==="group"&&N(n.layers,o,t,r)}let C;async function h(){return C===void 0&&(C=Be()),C}async function Be(){return Ie(await WA.room.getTiledMap())}function Ie(e){const o=new Map;return K(e.layers,"",o),o}function K(e,o,t){for(const r of e)r.type==="group"?K(r.layers,o+r.name+"/",t):(r.name=o+r.name,t.set(r.name,r))}async function De(){const e=await h(),o=[];for(const t of e.values())if(t.type==="objectgroup")for(const r of t.objects)(r.type==="area"||r.class==="area")&&o.push(r);return o}function Ge(e){let o=1/0,t=1/0,r=0,n=0;const i=e.data;if(typeof i=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let s=0;s<e.height;s++)for(let u=0;u<e.width;u++)i[u+s*e.width]!==0&&(o=Math.min(o,u),n=Math.max(n,u),t=Math.min(t,s),r=Math.max(r,s));return{top:t,left:o,right:n+1,bottom:r+1}}function X(e){let o=1/0,t=1/0,r=0,n=0;for(const i of e){const s=Ge(i);s.left<o&&(o=s.left),s.top<t&&(t=s.top),s.right>n&&(n=s.right),s.bottom>r&&(r=s.bottom)}return{top:t,left:o,right:n,bottom:r}}class Y{constructor(o,t){this.template=o,this.state=t,this.ast=E.parse(o)}getValue(){return this.value===void 0&&(this.value=E.render(this.template,this.state)),this.value}onChange(o){const t=[];for(const r of this.getUsedVariables().values())t.push(this.state.onVariableChange(r).subscribe(()=>{const n=E.render(this.template,this.state);n!==this.value&&(this.value=n,o(this.value))}));return{unsubscribe:()=>{for(const r of t)r.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const o=new Set;return this.recursiveGetUsedVariables(this.ast,o),o}recursiveGetUsedVariables(o,t){for(const r of o){const n=r[0],i=r[1],s=r[4];["name","&","#","^"].includes(n)&&t.add(i),s!==void 0&&typeof s!="string"&&this.recursiveGetUsedVariables(s,t)}}}async function Je(){var e;const o=await De();for(const t of o){const r=(e=t.properties)!==null&&e!==void 0?e:[];for(const n of r){if(n.type==="int"||n.type==="bool"||n.type==="object"||typeof n.value!="string")continue;const i=new Y(n.value,WA.state);if(i.isPureString())continue;const s=i.getValue();await x(t.name,n.name,s),i.onChange(async u=>{await x(t.name,n.name,u)})}}}async function Ze(){var e;const o=await h();for(const[t,r]of o.entries())if(r.type!=="objectgroup"){const n=(e=r.properties)!==null&&e!==void 0?e:[];for(const i of n){if(i.type==="int"||i.type==="bool"||i.type==="object"||typeof i.value!="string")continue;const s=new Y(i.value,WA.state);if(s.isPureString())continue;const u=s.getValue();q(t,i.name,u),s.onChange(p=>{q(t,i.name,p)})}}}async function x(e,o,t){console.log(e),(await WA.room.area.get(e)).setProperty(o,t)}function q(e,o,t){WA.room.setProperty(e,o,t),o==="visible"&&(t?WA.room.showLayer(e):WA.room.hideLayer(e))}let P,_=0,V=0;function O(e){if(WA.state[e.name]){let o=e.properties.mustGetString("openLayer");for(const t of o.split(`
`))WA.room.showLayer(t);o=e.properties.mustGetString("closeLayer");for(const t of o.split(`
`))WA.room.hideLayer(t)}else{let o=e.properties.mustGetString("openLayer");for(const t of o.split(`
`))WA.room.hideLayer(t);o=e.properties.mustGetString("closeLayer");for(const t of o.split(`
`))WA.room.showLayer(t)}}function je(e){const o=e.properties.getString("openSound"),t=e.properties.getNumber("soundRadius");let r=1;if(t){const n=F(e.properties.mustGetString("openLayer").split(`
`));if(n>t)return;r=1-n/t}o&&WA.sound.loadSound(o).play({volume:r})}function xe(e){const o=e.properties.getString("closeSound"),t=e.properties.getNumber("soundRadius");let r=1;if(t){const n=F(e.properties.mustGetString("closeLayer").split(`
`));if(n>t)return;r=1-n/t}o&&WA.sound.loadSound(o).play({volume:r})}function $(e){return e.map(o=>P.get(o)).filter(o=>(o==null?void 0:o.type)==="tilelayer")}function F(e){const o=$(e),t=X(o),r=((t.right-t.left)/2+t.left)*32,n=((t.bottom-t.top)/2+t.top)*32;return Math.sqrt(Math.pow(_-r,2)+Math.pow(V-n,2))}function qe(e){WA.state.onVariableChange(e.name).subscribe(()=>{WA.state[e.name]?je(e):xe(e),O(e)}),O(e)}function Oe(e,o,t,r){const n=e.name;let i,s,u=!1;const p=t.getString("tag");let y=!0;p&&!WA.player.tags.includes(p)&&(y=!1);const b=!!p;function d(){var m;i&&i.remove(),i=WA.ui.displayActionMessage({message:(m=t.getString("closeTriggerMessage"))!==null&&m!==void 0?m:"Press SPACE to close the door",callback:()=>{WA.state[o.name]=!1,w()}})}function w(){var m;i&&i.remove(),i=WA.ui.displayActionMessage({message:(m=t.getString("openTriggerMessage"))!==null&&m!==void 0?m:"Press SPACE to open the door",callback:()=>{WA.state[o.name]=!0,d()}})}function Te(m){const Z=X($(o.properties.mustGetString("closeLayer").split(`
`)));s=WA.room.website.create({name:"doorKeypad"+m,url:r+"/keypad.html#"+encodeURIComponent(m),position:{x:Z.right*32,y:Z.top*32,width:32*3,height:32*4},allowApi:!0})}function J(){s&&(WA.room.website.delete(s.name),s=void 0)}WA.room.onEnterLayer(n).subscribe(()=>{if(u=!0,t.getBoolean("autoOpen")&&y){WA.state[o.name]=!0;return}if(!WA.state[o.name]&&(b&&!y||!b)&&(t.getString("code")||t.getString("codeVariable"))){Te(n);return}y&&(WA.state[o.name]?d():w())}),WA.room.onLeaveLayer(n).subscribe(()=>{u=!1,t.getBoolean("autoClose")&&(WA.state[o.name]=!1),i&&i.remove(),J()}),WA.state.onVariableChange(o.name).subscribe(()=>{u&&(!t.getBoolean("autoClose")&&WA.state[o.name]===!0&&d(),s&&WA.state[o.name]===!0&&J(),!t.getBoolean("autoOpen")&&WA.state[o.name]===!1&&w())})}function ze(e){const o=e.properties.mustGetString("bellSound"),t=e.properties.getNumber("soundRadius");let r=1;if(t){const n=Math.sqrt(Math.pow(e.x-_,2)+Math.pow(e.y-V,2));if(n>t)return;r=1-n/t}WA.sound.loadSound(o).play({volume:r})}function Ne(e){WA.state[e.name]===void 0&&(WA.state[e.name]=0),WA.state.onVariableChange(e.name).subscribe(()=>{WA.state[e.name]&&ze(e)})}function Ke(e,o,t){let r;const n=o.getString("bellPopup");WA.room.onEnterLayer(t).subscribe(()=>{var i;n?r=WA.ui.openPopup(n,"",[{label:(i=o.getString("bellButtonText"))!==null&&i!==void 0?i:"Ring",callback:()=>{WA.state[e]=WA.state[e]+1}}]):WA.state[e]=WA.state[e]+1}),WA.room.onLeaveLayer(t).subscribe(()=>{r&&(r.close(),r=void 0)})}async function Xe(e){e=e??k;const o=await Ue();P=await h();for(const t of o.values())t.properties.get("door")&&qe(t),t.properties.get("bell")&&Ne(t);for(const t of P.values()){const r=new f(t.properties),n=r.getString("doorVariable");if(n&&t.type==="tilelayer"){const s=o.get(n);if(s===void 0)throw new Error('Cannot find variable "'+n+'" referred in the "doorVariable" property of layer "'+t.name+'"');Oe(t,s,r,e)}const i=r.getString("bellVariable");i&&Ke(i,r,t.name)}WA.player.onPlayerMove(t=>{_=t.x,V=t.y})}function Ye(e,o){const t=e.getString("bindVariable");if(t){const r=e.get("enterValue"),n=e.get("leaveValue"),i=e.getString("triggerMessage"),s=e.getString("tag");$e(t,o,r,n,i,s)}}function $e(e,o,t,r,n,i){i&&!WA.player.tags.includes(i)||(t!==void 0&&WA.room.onEnterLayer(o).subscribe(()=>{n||(WA.state[e]=t)}),r!==void 0&&WA.room.onLeaveLayer(o).subscribe(()=>{WA.state[e]=r}))}async function Fe(){const e=await h();for(const o of e.values()){const t=new f(o.properties);Ye(t,o.name)}}let z;async function He(e){const o=await WA.room.getTiledMap();e=e??k,z=await h();const t=o.layers.find(r=>r.name==="configuration");if(t){const n=new f(t.properties).getString("tag");(!n||WA.player.tags.includes(n))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(e+"/configuration.html",!0)});for(const i of z.values()){const s=new f(i.properties),u=s.getString("openConfig");u&&i.type==="tilelayer"&&Qe(u.split(","),i.name,s)}}}function Qe(e,o,t){let r;const n=t.getString("openConfigAdminTag");let i=!0;n&&!WA.player.tags.includes(n)&&(i=!1);function s(){var p;r&&r.remove(),r=WA.ui.displayActionMessage({message:(p=t.getString("openConfigTriggerMessage"))!==null&&p!==void 0?p:"Press SPACE or touch here to configure",callback:()=>j(e)})}function u(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(o).subscribe(()=>{const p=t.getString("openConfigTrigger");i&&(p&&p==="onaction"?s():j(e))}),WA.room.onLeaveLayer(o).subscribe(()=>{r&&r.remove(),u()})}function eo(){return WA.onInit().then(()=>{Xe().catch(e=>console.error(e)),Fe().catch(e=>console.error(e)),He().catch(e=>console.error(e)),Ze().catch(e=>console.error(e)),Je().catch(e=>console.error(e))}).catch(e=>console.error(e))}console.log("Script started successfully");var a=void 0,W=void 0,c="Schließen",H="popUpJobs1",Q="popUpJobs2",oo="jobs_1",to="jobs_2",ee="Finde die passende Einstiegsmöglichkeit für dich",oe="Jobs anzeigen",te="https://db.jobs/service/search/de-de/5441588?qli=true&query=&itemsPerPage=10&pageNum=0&positiontype=Ausbildung&positiontype=Duales+Studium",re="popUpJobProfiler",ro="jobProfiler",no="Du weißt noch nicht, wohin es gehen soll?",ao="Finde es hier heraus!",io="https://ausbildung-deutschebahn.com/jobprofiler/?utm_source=Careerpage&utm_medium=organic_Linkout&utm_campaign=Rec_Jobprofiler&utm_term=bundesweit_Azubi",ne="popUpMeetUs",so="meetUs",lo="Lerne uns persönlich kennen",uo="Meet Us",po="https://db.jobs/service/search/de-de/9639412?qli=true&query=&itemsPerPage=10&pageNum=0&positiontype=Ausbildung&positiontype=Duales+Studium",ae="popUpDoVoting",co="doVoting",mo="Möchtest du am Voting teilnehmen und weitere interessante Dinge über die DB als Arbeitgeber erfahren?",yo="Ja!",go="Kein Interesse",v="Voting abbrechen",bo="importance",fo=`Willkommen beim Voting. Lass uns direkt loslegen:

Was ist dir wichtig?

Springe in das jeweilige Portal, um deine Stimme abzugeben.`,ho="importanceResult",Ao=`Na? Ist dir die Entscheidung schwer gefallen?

Zum Glück musst du dich bei uns nicht für eine der Optionen entscheiden. Du bekommst sie alle!`,Wo="Cool!",vo="jobLocation",Lo=`Wo möchtest du am liebsten arbeiten?

Gehe zum jeweiligen Ort, um deine Stimme abzugeben.`,wo="locationResult",Eo="Bei uns kannst du jedem der Bereiche einstiegen. Schau dich doch einfach mal um:",Co="Zeig mir die Jobs!",So="https://db.jobs/service/search/de-de/7707604?qli=true&query=&itemsPerPage=10&pageNum=0&country=Deutschland&positiontype=Ausbildung&positiontype=Duales+Studium",Po="../db/hm-bahnhof#specialZones/voting/entry1stRoom",ko="../db/hm-bahnhof#specialZones/voting/entry2ndRoom",_o="../db/hm-bahnhof#specialZones/voting/entry3rdRoom",Vo="../db/hm-bahnhof#specialZones/voting/entry4thRoom",ie="../db/hm-bahnhof#specialZones/voting/votingExit",se="popUpTime",Ro="time",To="Wusstest du eigentlich, dass du bei der Bahn immer geregelte Arbeitszeiten hast?",le="popUpVacation",Mo="vacation",Uo="Wusstest du eigentlich, dass du bei der DB 28 Tage Urlaub bekommst?",ue="popUpAcquisition",Bo="garantueedAcquisition",Io="Wusstest du eigentlich, dass deine Übernahme bei der DB garantiert wird?",pe="popUpContact",Do="contact",Go="Wusstest du eigentlich, dass dir bei der Bahn zu jeder Zeit eine Ansprechperson zur Seite steht?",ce="popUpTickets",Jo="tickets",Zo="Wusstest du eigentlich, dass du bei der Bahn Freifahrten in ganz Deutschland erhältst?",me="popUpChest",jo="chest",xo="Wusstest du eigentlich, dass dir die Bahn eine attraktive Vergütung bietet?",ye="popUpPercent",qo="percent",Oo="Wusstest du eigentlich, dass du bei der Bahn diverse Vergünstigungen in den Bereichen Shopping, Freizeit, Reisen und Bahn erhältst?";function l(e){e!==void 0&&(e.close(),e=void 0)}WA.room.onLeaveLayer(se).subscribe(()=>{l(a)});WA.room.onEnterLayer(se).subscribe(()=>{a=WA.ui.openPopup(Ro,To,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(le).subscribe(()=>{l(a)});WA.room.onEnterLayer(le).subscribe(()=>{a=WA.ui.openPopup(Mo,Uo,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(ue).subscribe(()=>{l(a)});WA.room.onEnterLayer(ue).subscribe(()=>{a=WA.ui.openPopup(Bo,Io,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(pe).subscribe(()=>{l(a)});WA.room.onEnterLayer(pe).subscribe(()=>{a=WA.ui.openPopup(Do,Go,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(ce).subscribe(()=>{l(a)});WA.room.onEnterLayer(ce).subscribe(()=>{a=WA.ui.openPopup(Jo,Zo,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(me).subscribe(()=>{l(a)});WA.room.onEnterLayer(me).subscribe(()=>{a=WA.ui.openPopup(jo,xo,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(ye).subscribe(()=>{l(a)});WA.room.onEnterLayer(ye).subscribe(()=>{a=WA.ui.openPopup(qo,Oo,[{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(H).subscribe(()=>{l(a)});WA.room.onEnterLayer(H).subscribe(()=>{a=WA.ui.openPopup(oo,ee,[{label:oe,callback:e=>{WA.nav.openTab(te),l(a)}},{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(Q).subscribe(()=>{l(a)});WA.room.onEnterLayer(Q).subscribe(()=>{a=WA.ui.openPopup(to,ee,[{label:oe,callback:e=>{WA.nav.openTab(te),l(a)}},{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(re).subscribe(()=>{l(a)});WA.room.onEnterLayer(re).subscribe(()=>{a=WA.ui.openPopup(ro,no,[{label:ao,callback:e=>{WA.nav.openTab(io),l(a)}},{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(ne).subscribe(()=>{l(a)});WA.room.onEnterLayer(ne).subscribe(()=>{a=WA.ui.openPopup(so,lo,[{label:uo,callback:e=>{WA.nav.openTab(po),l(a)}},{label:c,callback:e=>{l(a)}}])});WA.room.onLeaveLayer(ae).subscribe(()=>{l(W)});WA.room.onEnterLayer(ae).subscribe(()=>{WA.player.state.hasVoted||(W=WA.ui.openPopup(co,mo,[{label:yo,callback:e=>{l(W),WA.player.state.hasVoted=!0,Ko(),WA.nav.goToRoom(Po)}},{label:go,callback:e=>{l(W)}}]))});var ge="trains_top/ice1_roof",be="trains_top/ice1_maul",de="trains_top/ice2_roof",fe="trains_top/ice2_maul",he="trains_top/ice3_roof",Ae="trains_top/ice3_maul",We="trains_top/ice4_roof",ve="trains_top/ice4_maul",Le="trains_top/regio1_roof",we="trains_top/regio1_maul",Ee="trains_top/regio2_roof",Ce="trains_top/regio2_maul",Se="specialZones/ICEs/hideICE1",Pe="specialZones/ICEs/hideICE2",ke="specialZones/ICEs/hideICE3",_e="specialZones/ICEs/hideICE4",Ve="specialZones/ICEs/hideRegio1",Re="specialZones/ICEs/hideRegio2";WA.room.onLeaveLayer(Se).subscribe(()=>{WA.room.showLayer(ge),WA.room.hideLayer(be)});WA.room.onEnterLayer(Se).subscribe(()=>{WA.room.hideLayer(ge),WA.room.showLayer(be)});WA.room.onLeaveLayer(Pe).subscribe(()=>{WA.room.showLayer(de),WA.room.hideLayer(fe)});WA.room.onEnterLayer(Pe).subscribe(()=>{WA.room.hideLayer(de),WA.room.showLayer(fe)});WA.room.onLeaveLayer(ke).subscribe(()=>{WA.room.showLayer(he),WA.room.hideLayer(Ae)});WA.room.onEnterLayer(ke).subscribe(()=>{WA.room.hideLayer(he),WA.room.showLayer(Ae)});WA.room.onLeaveLayer(_e).subscribe(()=>{WA.room.showLayer(We),WA.room.hideLayer(ve)});WA.room.onEnterLayer(_e).subscribe(()=>{WA.room.hideLayer(We),WA.room.showLayer(ve)});WA.room.onLeaveLayer(Ve).subscribe(()=>{WA.room.showLayer(Le),WA.room.hideLayer(we)});WA.room.onEnterLayer(Ve).subscribe(()=>{WA.room.hideLayer(Le),WA.room.showLayer(we)});WA.room.onLeaveLayer(Re).subscribe(()=>{WA.room.showLayer(Ee),WA.room.hideLayer(Ce)});WA.room.onEnterLayer(Re).subscribe(()=>{WA.room.hideLayer(Ee),WA.room.showLayer(Ce)});var R="voting_top_closed/room1",T="voting_top_closed/room2",M="voting_top_closed/room3",U="voting_top_closed/room4",g="voting_top_opened/mainRoom",B="voting_top_opened/room1",I="voting_top_opened/room2",D="voting_top_opened/room3",G="voting_top_opened/room4";const zo=[{label:"Reset",className:"error",callback:()=>{WA.state.voteMoney=WA.state.voteAcquisition=WA.state.voteTicket=WA.state.voteOffice=WA.state.voteOutside=WA.state.voteWorkshop=WA.state.voteTrain=0,WA.player.state.hasVoted=!1}}];function L(){WA.room.hideLayer(g),WA.room.hideLayer(B),WA.room.hideLayer(I),WA.room.hideLayer(D),WA.room.hideLayer(G),WA.room.showLayer(R),WA.room.showLayer(T),WA.room.showLayer(M),WA.room.showLayer(U),WA.nav.goToRoom(ie)}function No(){WA.room.hideLayer(g),WA.room.hideLayer(G),WA.room.showLayer(U),WA.nav.goToRoom(ie)}function Ko(){console.log("preparing 1st room..."),WA.room.hideLayer(R),WA.room.showLayer(g),WA.room.showLayer(B),a!=null&&l(a),a=WA.ui.openPopup(bo,fo,[{label:c,callback:e=>{l(a)}},{label:v,callback:e=>{l(a),L()}}])}function S(){console.log("preparing 2nd room..."),WA.room.showLayer(R),WA.room.showLayer(g),WA.room.showLayer(I),WA.room.hideLayer(B),WA.room.hideLayer(T),WA.nav.goToRoom(ko),a!=null&&l(a),a=WA.ui.openPopup(ho,Ao,[{label:Wo,callback:e=>{l(a)}},{label:v,callback:e=>{l(a),L()}}])}function Xo(){console.log("preparing 3rd room..."),WA.room.showLayer(g),WA.room.showLayer(T),WA.room.showLayer(D),WA.room.hideLayer(I),WA.room.hideLayer(M),WA.nav.goToRoom(_o),a!=null&&l(a),a=WA.ui.openPopup(vo,Lo,[{label:c,callback:e=>{l(a)}},{label:v,callback:e=>{l(a),L()}}])}function A(){console.log("preparing 4th room..."),WA.room.showLayer(g),WA.room.showLayer(M),WA.room.showLayer(G),WA.room.hideLayer(D),WA.room.hideLayer(U),WA.nav.goToRoom(Vo),a!=null&&l(a),a=WA.ui.openPopup(wo,Eo,[{label:Co,callback:e=>{WA.nav.openTab(So),l(a)}},{label:c,callback:e=>{l(a)}},{label:v,callback:e=>{l(a),L()}}])}WA.onInit().then(async()=>{eo().then(()=>{console.log("Scripting API Extra ready")}).catch(d=>console.error(d));var e="specialZones/voting/acquisitionVoting",o="specialZones/voting/moneyVoting",t="specialZones/voting/ticketVoting",r="specialZones/voting/officeVoting",n="specialZones/voting/workshopVoting",i="specialZones/voting/trainVoting",s="specialZones/voting/outsideVoting",u="specialZones/voting/exit2ndRoom",p="specialZones/voting/openExit_auto",y="specialZones/voteReset";WA.room.onEnterLayer(e).subscribe(()=>{WA.state.voteAcquisition++,S()}),WA.room.onLeaveLayer(e).subscribe(()=>{WA.state.voteAcquisition}),WA.room.onEnterLayer(o).subscribe(()=>{WA.state.voteMoney++,S()}),WA.room.onLeaveLayer(o).subscribe(()=>{WA.state.voteMoney}),WA.room.onEnterLayer(t).subscribe(()=>{WA.state.voteTicket++,S()}),WA.room.onLeaveLayer(t).subscribe(()=>{WA.state.voteTicket}),WA.room.onEnterLayer(u).subscribe(()=>{Xo()}),WA.room.onEnterLayer(r).subscribe(()=>{WA.state.voteOffice++,A()}),WA.room.onLeaveLayer(r).subscribe(()=>{WA.state.voteOffice}),WA.room.onEnterLayer(i).subscribe(()=>{WA.state.voteTrain++,A()}),WA.room.onLeaveLayer(i).subscribe(()=>{WA.state.voteTrain}),WA.room.onEnterLayer(n).subscribe(()=>{WA.state.voteWorkshop++,A()}),WA.room.onLeaveLayer(n).subscribe(()=>{WA.state.voteWorkshop}),WA.room.onEnterLayer(s).subscribe(()=>{WA.state.voteOutside++,A()}),WA.room.onLeaveLayer(s).subscribe(()=>{WA.state.voteOutside}),WA.room.onEnterLayer(p).subscribe(()=>{No()});let b;WA.room.onEnterLayer(y).subscribe(()=>{(WA.player.tags.includes("editor")||WA.player.tags.includes("admin")||WA.player.tags.includes("hm-station-admin"))&&(b=WA.ui.openPopup("resetPopup","Soll das Voting zurückgesetzt werden?",zo))}),WA.room.onLeaveLayer(y).subscribe(()=>{b.close()})}).catch(e=>console.error(e));
